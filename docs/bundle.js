!function(){"use strict";function n(n,o){var r,u=[];for(e=arguments.length;e-- >2;)t.push(arguments[e]);for(;t.length;)if(Array.isArray(r=t.pop()))for(e=r.length;e--;)t.push(r[e]);else null!=r&&!0!==r&&!1!==r&&u.push("number"==typeof r?r+="":r);return"string"==typeof n?{type:n,props:o||{},children:u}:n(o||{},u)}var e,t=[];!function(e,t){function o(){e.view&&!m&&requestAnimationFrame(r,m=!m)}function r(){u(b=v(t,b,k,k=e.view(g,w),m=!m))}function u(n){for(;n=A.pop();)n()}function i(e,t){return e&&n(e.tagName.toLowerCase(),{},t.call(e.childNodes,function(n){return 3===n.nodeType?n.nodeValue:i(n,t)}))}function c(n,e,t){n.init&&A.push(function(){n.init(e,t)}),p(e,n.state),f(e,t,n.actions);for(var o in n.modules)c(n.modules[o],e[o]={},t[o]={})}function f(n,e,t){function r(e){return"function"==typeof e?r(e(n)):e&&o(p(n,e)),n}Object.keys(t||{}).map(function(o){"function"==typeof t[o]?e[o]=function(u){return"function"==typeof(u=t[o](n,e,u))?u(r):r(u)}:f(n[o]||(n[o]={}),e[o]={},t[o])})}function p(n,e){for(var t in e)n[t]=e[t];return n}function l(n,e){return p(p({},n),e)}function s(n,e){if("string"==typeof n)t=document.createTextNode(n);else{var t=(e=e||"svg"===n.type)?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type);for(n.props&&n.props.oncreate&&A.push(function(){n.props.oncreate(t)}),o=0;o<n.children.length;o++)t.appendChild(s(n.children[o],e));for(var o in n.props)a(t,o,n.props[o])}return t}function a(n,e,t,o){if("key"===e);else if("style"===e)for(var e in l(o,t=t||{}))n.style[e]=t[e]||"";else{try{n[e]=t}catch(n){}"function"!=typeof t&&(t?n.setAttribute(e,t):n.removeAttribute(e))}}function d(n,e,t){for(var o in l(e,t)){var r=t[o],u="value"===o||"checked"===o?n[o]:e[o];r!==u&&r!==u&&a(n,o,r,u)}t&&t.onupdate&&A.push(function(){t.onupdate(n,e)})}function h(n,e,t){function o(){n.removeChild(e)}t&&t.onremove&&"function"==typeof(t=t.onremove(e))?t(o):o()}function y(n){if(n&&n.props)return n.props.key}function v(n,e,t,o,r,u){if(null==t)e=n.insertBefore(s(o,r),e);else if(null!=o.type&&o.type===t.type){d(e,t.props,o.props),r=r||"svg"===o.type;for(var i=o.children.length,c=t.children.length,f={},p=[],l={},a=0;a<c;a++)g=p[a]=e.childNodes[a],null!=(N=y(w=t.children[a]))&&(f[N]=[g,w]);for(var a=0,m=0;m<i;){var g=p[a],w=t.children[a],b=o.children[m];if(l[N=y(w)])a++;else{var k=y(b),A=f[k]||[];null==k?(null==N&&(v(e,g,w,b,r),m++),a++):(N===k?(v(e,A[0],A[1],b,r),a++):A[0]?(e.insertBefore(A[0],g),v(e,A[0],A[1],b,r)):v(e,g,null,b,r),m++,l[k]=b)}}for(;a<c;){var N=y(w=t.children[a]);null==N&&h(e,p[a],w.props),a++}for(var a in f){var B=(A=f[a])[1];l[B.props.key]||h(e,A[0],B.props)}}else e&&o!==e.nodeValue&&("string"==typeof o&&"string"==typeof t?e.nodeValue=o:(e=n.insertBefore(s(o,r),u=e),h(n,u,t.props)));return e}var m,g,w,b=(t=t||document.body).children[0],k=i(b,[].map),A=[];o(u(c(e,g={},w={})))}({state:{count:0},view:function(e,t){return n("main",null,n("h1",null,e.count),n("button",{onclick:t.down,disabled:e.count<=0},"ー"),n("button",{onclick:t.up},"＋"))},actions:{down:function(n){return{count:n.count-1}},up:function(n){return{count:n.count+1}}}},document.getElementById("app"))}();
